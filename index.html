<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap/Font Awesome CDN Version -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
    <link href="https://kenwheeler.github.io/slick/slick/slick-theme.css" rel="stylesheet"/>

    <link rel="stylesheet" href="./assets/style.css">
    <title>Athbi's Web</title>
</head>
<body>

  <!-- Navbar menu (responsive => with mobile ) -->
    <nav class="navbar">
        <ul class="navbar-nav">
          <li class="logo">
            <a href="#" class="nav-link">
              <span class="link-text logo-text">SIDEBAR</span>
              <svg aria-hidden="true" focusable="false"data-prefix="fad"data-icon="angle-double-right"role="img"xmlns="http://www.w3.org/2000/svg"viewBox="0 0 448 512"class="svg-inline--fa fa-angle-double-right fa-w-14 fa-5x"><g class="fa-group"><path fill="currentColor"d="M224 273L88.37 409a23.78 23.78 0 0 1-33.8 0L32 386.36a23.94 23.94 0 0 1 0-33.89l96.13-96.37L32 159.73a23.94 23.94 0 0 1 0-33.89l22.44-22.79a23.78 23.78 0 0 1 33.8 0L223.88 239a23.94 23.94 0 0 1 .1 34z"class="fa-secondary"></path><path fill="currentColor"d="M415.89 273L280.34 409a23.77 23.77 0 0 1-33.79 0L224 386.26a23.94 23.94 0 0 1 0-33.89L320.11 256l-96-96.47a23.94 23.94 0 0 1 0-33.89l22.52-22.59a23.77 23.77 0 0 1 33.79 0L416 239a24 24 0 0 1-.11 34z"class="fa-primary"></path></g></svg>
            </a>
          </li>
    
          <li class="nav-item">
            <a href="./index.html" class="nav-link">
                <img src="./img/popcorn.png" width="32px" alt="">
              <span class="link-text">الرئيسي</span>
            </a>
          </li>
    
          <li class="nav-item">
            <a href="./MostPopular.html" class="nav-link">
                <img src="./img/trending.png" width="32px" alt="">
                <span class="link-text">الأكثر شهره</span>
            </a>
          </li>
    
          <li class="nav-item">
            <a href="./MostVoted.html" class="nav-link">
                <img src="./img/star.png" width="32px" alt="">
                <span class="link-text">الاعلى تقيم</span>
            </a>
          </li>
                 
          <li class="nav-item">
            <a href="./Genre.html?id=35" class="nav-link">
                <img src="./img/clown.png" width="32px" alt="">
                <span class="link-text">كوميدي</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="./Genre.html?id=28" class="nav-link">
                <img src="./img/killer.png" width="32px" alt="">
                <span class="link-text">اكشن</span>
            </a>
          </li>
    
          <li class="nav-item">
            <a href="./Genre.html?id=27" class="nav-link">
                <img src="./img/spider-web.png" width="32px" alt="">
                <span class="link-text">رعب</span>
            </a>
          </li>
          
          
          <li class="nav-item" id="themeButton">
            <a href="#" class="nav-link">
                <img src="./img/barmej.svg" alt="">
                <span class="link-text">Homework #Athbi</span>
            </a>
          </li>
        </ul>
      </nav>
      <!-- Main Container -->
      <main>

        <!-- Page info (small version of navbar) -->
         <div class="jumbotron p-4 p-md-5 text-white rounded slider-con">
          <div class="slider-image">
            <div class="col-md-6 px-0">
              <h1 class="display-4 font-italic slider-title">Main Page</h1>
              </div>
            </div>          
        </div> 

        <!-- Page Loader (From bootstrap) -->
        <div id="Loader" style="display: none;" class="justify-content-center">
          <div class="spinner-border" role="status">
            <span class="sr-only"></span>
          </div>
        </div>

        <!-- Netflix Desing (Movies card)  -->   
        <div id="NsContainer" class="ns-container" style="display: none;">

          <!-- First section -->
          <h2 style="margin-top: -20px !important;">Popluar Movies</h2>
          <div id="popluar_section" class="wrapper">
           <!-- Js Automated -->
          </div>


         <!-- Sec section -->
         <h2>Upcoming Movies</h2>
         <div id="upcoming_section" class="wrapper">
           <!-- Js Automated -->
          </div>

         <!-- Third section -->
         <h2>Popluar TV Show</h2>
         <div id="popluartv_section" class="wrapper">
           <!-- Js Automated -->
          </div>

        </div>


      </main>
    <!-- Bootstrap\Jquery JS  -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
    <!-- My version of js -->
    <script src="./assets/movies.js"></script>

    <!-- Page Heart -->
    <script>



      //Async function
      let PouplarSection = function() {
      return new Promise(function(resolve,reject) {
          getPouplar().then(result => {
             var MainSection = document.getElementById("popluar_section")
             var movies = result["results"] ;   
           for (i = 0; i < 10; i++) {
              var single_movie = movies[i] ;
              var poster = "https://image.tmdb.org/t/p/w400" + single_movie["poster_path"];
              var rating = single_movie["vote_average"] / 2 //Dived by 2 (i want 5 star rating)
              var date = single_movie["release_date"].split("-"); // 2030-3-3 (i want the year sooo..)
              var display = single_movie["title"] + "(" + date[0]  + ")";
              var Movie_Location =  "window.location=" + "'./Single.html?id=" + single_movie["id"] + "'"; 
              MainSection.innerHTML += '<div onclick="'+Movie_Location+'" class="item"><img class="ns-img" src="'+poster+'"/><div class="ns-desc"><h4>'+display+'</h4>'
              MainSection.innerHTML += '</div></div>';
           }
           resolve();
          })
      }); 
    };

    let UpcomingSection = function() {
    return new Promise(function(resolve,reject) {
          getUpcoming().then(result => {
             var MainSection = document.getElementById("upcoming_section")
             var movies = result["results"] ;   
           for (i = 0; i < 10; i++) {
              var single_movie = movies[i] ;
              var poster = "https://image.tmdb.org/t/p/w400" + single_movie["backdrop_path"];
              var rating = single_movie["vote_average"] / 2 //Dived by 2 (i want 5 star rating)
              var date = single_movie["release_date"].split("-"); // 2030-3-3 (i want the year sooo..)
              var display = single_movie["title"] + "(" + date[0]  + ")";
              var Movie_Location =  "window.location=" + "'./Single.html?id=" + single_movie["id"] + "'"; 
              MainSection.innerHTML += '<div onclick="'+Movie_Location+'" class="item" ><img style="width: 314px;" class="ns-img" src="'+poster+'"/><div class="ns-desc"><h4>'+display+'</h4>'
              MainSection.innerHTML += '</div></div>';
           }
           resolve();
          })
      }); 
    };

    let PouplarTvSection = function() {
      return new Promise(function(resolve,reject) {
        getPouplarTvShows().then(result => {
             var MainSection = document.getElementById("popluartv_section")
             var movies = result["results"] ;   
           for (i = 0; i < 10; i++) {
              var single_movie = movies[i] ;
              var poster = "https://image.tmdb.org/t/p/w400" + single_movie["poster_path"];
              var rating = single_movie["vote_average"] / 2 //Dived by 2 (i want 5 star rating)
              var date = single_movie["first_air_date"].split("-"); // 2030-3-3 (i want the year sooo..)
              var display = single_movie["original_name"] + "(" + date[0]  + ")";
              var Movie_Location =  "alert('Sorry my master told me to speak movies language ):')"; 
              MainSection.innerHTML += '<div onclick="'+Movie_Location+'" class="item"><img class="ns-img" src="'+poster+'"/><div class="ns-desc"><h4>'+display+'</h4>'
              MainSection.innerHTML += '</div></div>';
           }
           resolve();
          })
      }); 
    };



    let InitSliders = function() {
    return new Promise(function(resolve,reject) {
      var $ = jQuery;
        $(document).ready(function() {
          $('.wrapper').slick({
            infinite: true,
            slidesToShow: 3,
            slidesToScroll: 3,
            variableWidth: true,
            mobileFirst:true,
            responsive: [
            {
              breakpoint: 1300,
              settings: {
                slidesToShow: 5,
                slidesToScroll: 5,
                infinite: true,
              }
            },
            {
              breakpoint: 1024,
              settings: {
                slidesToShow: 3,
                slidesToScroll: 3,
                infinite: true,
              }
            },
            {
              breakpoint: 600,
              settings: {
                slidesToShow: 2,
                slidesToScroll: 2
              }
            }]
          });
        });
        resolve();
      }); 
    };



    async function MagicHandler () {
      document.getElementById("Loader").style.display = "flex" ;
      const LoadDeep = [await PouplarSection(), await UpcomingSection(),await PouplarTvSection()]; // this wait for function to finsh 
      const InitSlickPlugin = await InitSliders()
      document.getElementById("Loader").style.display = "none" ;   
      document.getElementById("NsContainer").style.display =" block"
    }


    MagicHandler () 

    </script>
  </body>
</html>